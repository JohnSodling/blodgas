<!DOCTYPE html>
<html>

<head>
    <title>Blodgasanalys</title>
</head>

<body>

    <h1>Blodgasanalys</h1>
    <p>Analysverktyg för blodgastolkning. Betaversion.</p>
    <table>
        <tr>
            <th>pH</th>
            <th><input id="pH" type="number"></th>
            <td>7,35 - 7,44</td>
        </tr>
        <tr>
            <th>pCO2</th>
            <th><input id="pCO2" type="number"></th>
            <td>4,0 - 6,0 kPa</td>
        </tr>
        <tr>
            <th>pO2</th>
            <th><input id="pO2" type="number"></th>
            <td>7,4 - 11,5 kPa</td>
        </tr>
        <tr>
            <th>BE</th>
            <th><input id="BE"></th>
            <td>-3 - 3</td>
        </tr>
        <tr>
            <th>HCO3</th>
            <th><input id="HCO3" type="number"></th>
            <td>22 - 27</td>
        </tr>
        <tr>
            <th>Na</th>
            <th><input id="Na" type="number"></th>
            <td>134 - 144</td>
        </tr>
        <tr>
            <th>K</th>
            <th><input id="Ka" type="number"></th>
            <td>3,5 - 4,5</td>
        </tr>
        <tr>
            <th>Cl</th>
            <th><input id="Cl" type="number"></th>
            <td>90 - 110</td>
        </tr>
        <tr>
            <th>Laktat</th>
            <th><input id="Laktat" type="number"></th>
            <td>0 - 1,1</td>
        </tr>
        <tr>
            <th>Albumin</th>
            <th><input id="Albumin" type="number"></th>
            <td>32 - 45</td>
        </tr>
    </table>

    <button type="button" onclick="syrabas();anjongap();deltaanjongap();deltaanjongapHCO3();deltaanjongapHCO3tolk();SID();deltaSID();deltaLaktat();deltaAlbumin();SIG();deltaSIG();aceofbase();kompensation()">Analysera</button>
    
    <p id="demo" style="font-weight:bold;"></p>
    <span id="komp0"></span>
    <table border="1px solid black">
        <tr>
            <td><span id="komp1"></span></td>
            <td><span id="komp2"></span></td>
        </tr>
        <tr>
            <td><span id="komp3"></span></td>
            <td><span id="komp4"></span></td>
        </tr>
        <tr>
            <td><span id="komp5"></span></td>
            <td><span id="komp6"></span></td>
        </tr>
        <tr>
            <td><span id="komp7"></span></td>
            <td><span id="komp8"></span></td>
        </tr>
        <tr>
            <td><span id="komp9"></span></td>
            <td><span id="komp10"></span></td>
        </tr>
        <tr>
            <td><span id="komp11"></span></td>
            <td><span id="komp12"></span></td>
        </tr>
    </table>
    <br>
    <table border="1px solid black">
        <tr>
            <td><span id="demo2"></span></td>
        </tr>
        <tr>
            <td><span id="demo3"></span></td>
        </tr>
        <tr>
            <td><span id="demo4"></span></td>
        </tr>
        <tr>
            <td><span id="demo5" style="font-weight:bold;"></span></td>
        </tr>
    </table><br>
    <span id="demo6"></span><br>
    <span id="demo10"></span><br><br>

    <table border="1px solid black">
        <tr>
            <td><span id="demo7"></span></td>
            <td><span id="demo71"></span></td>
        </tr>
        <tr>
            <td><span id="demo8"></span></td>
            <td><span id="demo81"></span></td>
        </tr>
        <tr>
            <td><span id="demo9"></span></td>
            <td><span id="demo91"></span></td>
        </tr>
        <tr>
            <td><span id="demo11"></span></td>
            <td><span id="demo111"></span></td>
        </tr>
        <tr>
            <th><span id="demo12"></span></th>
            <th><span id="demo121"></span></th>
        </tr>
    </table>
    <p> Källor: Swesems PM for tolkning av blodgas. Ace of Basekortet</p>

    <script>
        function syrabas() {
            let pHvalue = document.getElementById("pH").value;
            let pCO2value = document.getElementById("pCO2").value;
            let BEvalue = document.getElementById("BE").value;
            if (pHvalue < 7.35 && pCO2value < 6 && BEvalue < -3) {
                document.getElementById("demo").innerHTML = "Metabol acidos";
            } else if (pHvalue < 7.35 && pCO2value > 6 && BEvalue > -3 || pHvalue < 7.35 && pCO2value > 6 && BEvalue > 21.99) {
                document.getElementById("demo").innerHTML = "Respiratorisk acidos";
            } else if (pHvalue < 7.35 && pCO2value > 6 && BEvalue < -3.1 || pHvalue < 7.35 && pCO2value > 6 && BEvalue < 22) {
                document.getElementById("demo").innerHTML = "Metabol och respiratorisk acidos";
            } else {
                document.getElementById("demo").innerHTML = "oklart, fyll i pH, pCO2 och BE / HCO3";
            }
        }
        function anjongap() {
            let navalue = document.getElementById("Na").value;
            let hco3value = document.getElementById("HCO3").value;
            let clvalue = document.getElementById("Cl").value;
            let anjongapresult = (navalue*10 - hco3value*10 - clvalue*10) / 10
            console.log(anjongapresult)
            document.getElementById("demo2").innerHTML = "Anjongap: " + anjongapresult;
        }
        function deltaanjongap() {
            let navalue = document.getElementById("Na").value;
            let hco3value = document.getElementById("HCO3").value;
            let clvalue = document.getElementById("Cl").value;
            let deltaanjongapresult = (navalue*10 - hco3value*10 - clvalue*10 - 12*10) / 10
            console.log(deltaanjongapresult)
            document.getElementById("demo3").innerHTML = "Delta anjongap: " + deltaanjongapresult;
        }
        function deltaanjongapHCO3() {
            let navalue = document.getElementById("Na").value;
            let hco3value = document.getElementById("HCO3").value;
            let clvalue = document.getElementById("Cl").value;
            let deltaanjongapHCO3result = (navalue*10 - clvalue*10 - 12*10) / 10
            console.log(deltaanjongapHCO3result)
            document.getElementById("demo4").innerHTML = "Delta anjongap + HCO3: " + deltaanjongapHCO3result;
        }
        function deltaanjongapHCO3tolk() {
            let navalue = document.getElementById("Na").value;
            let hco3value = document.getElementById("HCO3").value;
            let clvalue = document.getElementById("Cl").value;
            let deltaanjongapHCO3result = (navalue*10 - clvalue*10 - 12*10) / 10
            if (deltaanjongapHCO3result < 27.1 && deltaanjongapHCO3result > 20.9) {
                document.getElementById("demo5").innerHTML = "Delta AG + HCO3 talar för ingen ytterligare metabol rubbning";
            } else if (deltaanjongapHCO3result < 20.9) {
                document.getElementById("demo5").innerHTML = "Delta AG + HCO3 talar för samtidig hyperkloremisk metabol acidos";
            } else if (deltaanjongapHCO3result > 27.1) {
                document.getElementById("demo5").innerHTML = "Delta AG + HCO3 talar för samtidig samtidig metabol alkalos ";
            } else {
                document.getElementById("demo5").innerHTML = "oklart";
        }
        }
        function SID() {
            let navalue = document.getElementById("Na").value;
            let kvalue = document.getElementById("Ka").value;
            let clvalue = document.getElementById("Cl").value;
            let SIDresult = (+navalue*10 - clvalue*10 + +kvalue*10) / 10
            console.log(SIDresult)
            document.getElementById("demo6").innerHTML = "SID: " + SIDresult;
        }
        function deltaSID() {
            let navalue = document.getElementById("Na").value;
            let kvalue = document.getElementById("Ka").value;
            let clvalue = document.getElementById("Cl").value;
            let deltaSIDresult = (+navalue*10 + +kvalue*10 - clvalue*10 - 42*10) / 10
            console.log(deltaSIDresult)
            document.getElementById("demo7").innerHTML = "Delta-SID ([Na]+[K]-[Cl]) - 42: ";
            document.getElementById("demo71").innerHTML = deltaSIDresult + " mEq";
        }
        function deltaLaktat() {
            let laktatvalue = document.getElementById("Laktat").value;
            let deltaLaktatresult = (laktatvalue*10 - 1*10) / 10
            console.log(deltaLaktatresult)
            document.getElementById("demo8").innerHTML = "Delta laktat (Laktat - 1): ";
            document.getElementById("demo81").innerHTML = deltaLaktatresult + " mEq";
        }
        function deltaAlbumin() {
            let albuminvalue = document.getElementById("Albumin").value;
            let deltaAlbuminresult = +10*10/10 - ((albuminvalue*10/10) / (4*10/10))
            console.log(deltaAlbuminresult)
            document.getElementById("demo9").innerHTML = "Delta Albumin (10 - ([Albumin]/4): ";
            document.getElementById("demo91").innerHTML = " " + deltaAlbuminresult + " mEq ";
        }
        function SIG() {
            let navalue = document.getElementById("Na").value;
            let kvalue = document.getElementById("Ka").value;
            let clvalue = document.getElementById("Cl").value;
            let hco3value = document.getElementById("HCO3").value;
            let albuminvalue = document.getElementById("Albumin").value;
            let laktatvalue = document.getElementById("Laktat").value;
            let SIDresult = (+navalue*10 - clvalue*10 + +kvalue*10) / 10
            let SIGresult = (SIDresult*10 - hco3value*10 - ((albuminvalue/4)*10) -laktatvalue*10) / 10
            console.log(SIGresult)
            document.getElementById("demo10").innerHTML = "SIG: " + SIGresult;
        }
        function deltaSIG() {
            let navalue = document.getElementById("Na").value;
            let kvalue = document.getElementById("Ka").value;
            let clvalue = document.getElementById("Cl").value;
            let hco3value = document.getElementById("HCO3").value;
            let albuminvalue = document.getElementById("Albumin").value;
            let laktatvalue = document.getElementById("Laktat").value;
            let SIDresult = (+navalue*10 - clvalue*10 + +kvalue*10) / 10
            let SIGresult = (SIDresult*10 - hco3value*10 - ((albuminvalue/4)*10) -laktatvalue*10) / 10
            let deltaSIGresult = (7*10 - SIGresult*10) / 10
            console.log(deltaSIGresult)
            document.getElementById("demo11").innerHTML = "Delta SIG: ";
            document.getElementById("demo111").innerHTML = " " + deltaSIGresult + " mEq ";
        }
        function aceofbase() {
            let navalue = document.getElementById("Na").value;
            let kvalue = document.getElementById("Ka").value;
            let clvalue = document.getElementById("Cl").value;
            let hco3value = document.getElementById("HCO3").value;
            let albuminvalue = document.getElementById("Albumin").value;
            let laktatvalue = document.getElementById("Laktat").value;
            let SIDresult = (+navalue*10 - clvalue*10 + +kvalue*10) / 10
            let deltaSIDresult = (+navalue*10 + +kvalue*10 - clvalue*10 - 42*10) / 10
            let deltaLaktatresult = (laktatvalue*10 - 1*10) / 10
            let deltaAlbuminresult = +10*10/10 - ((albuminvalue*10/10) / (4*10/10))
            let SIGresult = (SIDresult*10 - hco3value*10 - ((albuminvalue/4)*10) -laktatvalue*10) / 10
            let deltaSIGresult = (7*10 - SIGresult*10) / 10
            let aceofbaseresult = (+deltaSIDresult*10 + +deltaLaktatresult*10 + +deltaAlbuminresult*10 + +deltaSIGresult*10) / 10
            console.log(aceofbaseresult)
            document.getElementById("demo12").innerHTML = "Summa: ";
            document.getElementById("demo121").innerHTML = " " + aceofbaseresult + " mEq ";
        }
        function kompensation() {
            let hco3value = document.getElementById("HCO3").value;
            let pCO2value = document.getElementById("pCO2").value;
            let Arespacidkompresult = (0.75 * (pCO2value - 5,3)) + +24
            console.log(Arespacidkompresult)
            document.getElementById("komp0").innerHTML = "Tabell över förväntad kompensation. Ett värde långt ifrån förväntat kan tala för flera parallella rubbningar."
            document.getElementById("komp1").innerHTML = "Akut Respiratorisk Acidos";
            document.getElementById("komp2").innerHTML = "Förväntat HCO3: " + Arespacidkompresult.toFixed(1);
            let Arespalkkompresult = 1.5 * (pCO2value - 5.3) + +24
            console.log(Arespalkkompresult)
            document.getElementById("komp3").innerHTML = "Akut Respiratorisk Alkalos";
            document.getElementById("komp4").innerHTML = "Förväntat HCO3: " + Arespalkkompresult.toFixed(1);
            let Krespacidkompresult = (2.62 * (pCO2value - 5.3)) + +24
            console.log(Krespacidkompresult)
            document.getElementById("komp5").innerHTML = "Kronisk Respiratorisk Acidos";
            document.getElementById("komp6").innerHTML = "Förväntat HCO3: " + Krespacidkompresult.toFixed(1);
            let Krespalkkompresult = (3*10/10 * (pCO2value - 5.3)) + +24*10/10
            console.log(Krespalkkompresult)
            document.getElementById("komp7").innerHTML = "Kronisk Respiratorisk Alkalos";
            document.getElementById("komp8").innerHTML = "Förväntat HCO3: " + Krespalkkompresult.toFixed(1);
            let metacidkompresult = 0.17 * (hco3value - 24) + +5.3
            console.log(metacidkompresult)
            document.getElementById("komp9").innerHTML = "Metabol acidos";
            document.getElementById("komp10").innerHTML = "Förväntat pCO2: " + metacidkompresult.toFixed(1);
            let metalkkompresult = 0.08*10/10 * (hco3value*10/10 - 24*10/10) + +5.3*10/10
            console.log(metalkkompresult)
            document.getElementById("komp11").innerHTML = "Metabol alkalos";
            document.getElementById("komp12").innerHTML = "Förväntat pCO2: " + metalkkompresult.toFixed(1);
        }
    </script>

</body>

</html>